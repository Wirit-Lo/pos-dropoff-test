import os
import glob

# ==============================================================================
# üîπ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà
# ==============================================================================

# ‡∏Ñ‡∏≥‡πÄ‡∏î‡∏¥‡∏° (‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏≤)
OLD_CODE = "def find_and_click_with_rotate_logic(window, target_id, max_rotations=15):"

# ‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà (‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ) -> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô 25 ‡∏£‡∏≠‡∏ö
NEW_CODE = "def find_and_click_with_rotate_logic(window, target_id, max_rotations=25):"

# ==============================================================================
# üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
# ==============================================================================

# ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Customsize (‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô *.py ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå)
target_files = glob.glob("Customsize*.py") 

print(f"üìÇ ‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {len(target_files)} ‡πÑ‡∏ü‡∏•‡πå")
print(f"üìù ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô: max_rotations=15 -> max_rotations=25")
print("-" * 60)

success_count = 0
skip_count = 0

for filepath in target_files:
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            content = f.read()

        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°
        if OLD_CODE in content:
            # ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà
            new_content = content.replace(OLD_CODE, NEW_CODE)
            
            with open(filepath, 'w', encoding='utf-8') as f:
                f.write(new_content)
            
            print(f"‚úÖ {filepath}: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢")
            success_count += 1
        elif "max_rotations=25" in content:
            print(f"‚è© {filepath}: ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤ 25 ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß (‡∏Ç‡πâ‡∏≤‡∏°)")
            skip_count += 1
        else:
            print(f"‚ö†Ô∏è {filepath}: ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô)")
            skip_count += 1

    except Exception as e:
        print(f"üî• Error {filepath}: {e}")

print("-" * 60)
print(f"‡∏™‡∏£‡∏∏‡∏õ: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à {success_count} ‡πÑ‡∏ü‡∏•‡πå | ‡∏Ç‡πâ‡∏≤‡∏° {skip_count} ‡πÑ‡∏ü‡∏•‡πå")