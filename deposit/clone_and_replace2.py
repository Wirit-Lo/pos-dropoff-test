import os

# ==============================================================================
# üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå Customsize2.py ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
# ==============================================================================
target_file = "Customsize2.py"

# ==============================================================================
# üîç ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏° (‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á)
# ==============================================================================
# ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ó‡πà‡∏≠‡∏ô log ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
OLD_CODE_PART = """    log("...‡∏à‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö -> ‡∏Å‡∏î '‡∏ñ‡∏±‡∏î‡πÑ‡∏õ' 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á...")
    for i in range(3):
        log(f"   -> Enter ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà {i+1}")
        smart_next(window)
        time.sleep(1.8)"""

# ==============================================================================
# ‚ú® ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà (‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏™‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÅ‡∏ó‡∏ô)
# ==============================================================================
# Logic: ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡πà‡∏≤ Services ‡πÉ‡∏ô Config
# - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô '‡∏ï‡∏≠‡∏ö‡∏£‡∏±‡∏ö') -> loop_count = 3
# - ‡∏ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ -> loop_count = 1
NEW_CODE_PART = """    # [Dynamic Next] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏î
    special_services = config['SPECIAL_SERVICES'].get('Services', '').strip()
    loop_count = 3 if special_services else 1
    
    log(f"...‡∏à‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (Services='{special_services}') -> ‡∏Å‡∏î '‡∏ñ‡∏±‡∏î‡πÑ‡∏õ' {loop_count} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á...")
    for i in range(loop_count):
        log(f"   -> Enter ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà {i+1}")
        smart_next(window)
        time.sleep(1.8)"""

# ==============================================================================
# üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
# ==============================================================================

if not os.path.exists(target_file):
    print(f"‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå {target_file}")
else:
    try:
        with open(target_file, 'r', encoding='utf-8') as f:
            content = f.read()

        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°
        # ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Indentation (‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤) ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏õ‡πä‡∏∞‡πÉ‡∏ô‡∏ö‡∏≤‡∏á Editor 
        # ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏•‡∏≠‡∏á‡∏´‡∏≤‡πÅ‡∏ö‡∏ö Loose Match (‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö) ‡∏´‡∏£‡∏∑‡∏≠ Replace ‡∏ï‡∏£‡∏á‡πÜ
        
        # ‡∏•‡∏≠‡∏á Replace ‡∏ï‡∏£‡∏á‡πÜ ‡∏Å‡πà‡∏≠‡∏ô
        if OLD_CODE_PART in content:
            new_content = content.replace(OLD_CODE_PART, NEW_CODE_PART)
            
            with open(target_file, 'w', encoding='utf-8') as f:
                f.write(new_content)
            print(f"‚úÖ {target_file}: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ (Dynamic Next 1 or 3)")
            
        else:
            # ‡∏Å‡∏£‡∏ì‡∏µ‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ window ‡∏´‡∏£‡∏∑‡∏≠ main_window ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á
            # ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡πÅ‡∏ö‡∏ö main_window ‡∏î‡∏π‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ
            OLD_CODE_VARIANT = OLD_CODE_PART.replace("smart_next(window)", "smart_next(main_window)")
            
            if OLD_CODE_VARIANT in content:
                # ‡πÅ‡∏Å‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢
                NEW_CODE_VARIANT = NEW_CODE_PART.replace("smart_next(window)", "smart_next(main_window)")
                new_content = content.replace(OLD_CODE_VARIANT, NEW_CODE_VARIANT)
                
                with open(target_file, 'w', encoding='utf-8') as f:
                    f.write(new_content)
                print(f"‚úÖ {target_file}: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ (‡πÄ‡∏à‡∏≠‡πÅ‡∏ö‡∏ö main_window)")
            else:
                print(f"‚ö†Ô∏è {target_file}: ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà)")
                # Debug: ‡∏õ‡∏£‡∏¥‡πâ‡∏ô‡∏ó‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡πâ‡∏î‡∏π
                # print(content) 

    except Exception as e:
        print(f"üî• Error: {e}")